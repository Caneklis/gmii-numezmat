/*!
 * Button visually impaired - v1.0.0 https://bvi.isvek.ru
 * Copyright 2014-2021 Oleg Korotenko <bvi@isvek.ru>.
 * Licensed MIT (https://github.com/veks/button-visually-impaired-javascript/blob/master/LICENSE)
 */
!(function (e, t) {
  "object" == typeof exports && "undefined" != typeof module
    ? (module.exports = t())
    : "function" == typeof define && define.amd
    ? define(t)
    : ((e = "undefined" != typeof globalThis ? globalThis : e || self).isvek =
        t());
})(this, function () {
  "use strict";
  function e(e, t) {
    var n = Object.keys(e);
    if (Object.getOwnPropertySymbols) {
      var i = Object.getOwnPropertySymbols(e);
      t &&
        (i = i.filter(function (t) {
          return Object.getOwnPropertyDescriptor(e, t).enumerable;
        })),
        n.push.apply(n, i);
    }
    return n;
  }
  function t(t) {
    for (var n = 1; n < arguments.length; n++) {
      var i = null != arguments[n] ? arguments[n] : {};
      n % 2
        ? e(Object(i), !0).forEach(function (e) {
            a(t, e, i[e]);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(i))
        : e(Object(i)).forEach(function (e) {
            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(i, e));
          });
    }
    return t;
  }
  function n(e) {
    return (n =
      "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
        ? function (e) {
            return typeof e;
          }
        : function (e) {
            return e &&
              "function" == typeof Symbol &&
              e.constructor === Symbol &&
              e !== Symbol.prototype
              ? "symbol"
              : typeof e;
          })(e);
  }
  function i(e, t) {
    if (!(e instanceof t))
      throw new TypeError("Cannot call a class as a function");
  }
  function o(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      (i.enumerable = i.enumerable || !1),
        (i.configurable = !0),
        "value" in i && (i.writable = !0),
        Object.defineProperty(e, i.key, i);
    }
  }
  function r(e, t, n) {
    return t && o(e.prototype, t), n && o(e, n), e;
  }
  function a(e, t, n) {
    return (
      t in e
        ? Object.defineProperty(e, t, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0,
          })
        : (e[t] = n),
      e
    );
  }
  function c(e, t) {
    (null == t || t > e.length) && (t = e.length);
    for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
    return i;
  }
  !(function (e) {
    var t = (function (e) {
      var t,
        i = Object.prototype,
        o = i.hasOwnProperty,
        r = "function" == typeof Symbol ? Symbol : {},
        a = r.iterator || "@@iterator",
        c = r.asyncIterator || "@@asyncIterator",
        s = r.toStringTag || "@@toStringTag";
      function l(e, t, n) {
        return (
          Object.defineProperty(e, t, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0,
          }),
          e[t]
        );
      }
      try {
        l({}, "");
      } catch (e) {
        l = function (e, t, n) {
          return (e[t] = n);
        };
      }
      function u(e, t, n, i) {
        var o = t && t.prototype instanceof g ? t : g,
          r = Object.create(o.prototype),
          a = new q(i || []);
        return (
          (r._invoke = (function (e, t, n) {
            var i = f;
            return function (o, r) {
              if (i === d) throw new Error("Generator is already running");
              if (i === m) {
                if ("throw" === o) throw r;
                return H();
              }
              for (n.method = o, n.arg = r; ; ) {
                var a = n.delegate;
                if (a) {
                  var c = O(a, n);
                  if (c) {
                    if (c === b) continue;
                    return c;
                  }
                }
                if ("next" === n.method) n.sent = n._sent = n.arg;
                else if ("throw" === n.method) {
                  if (i === f) throw ((i = m), n.arg);
                  n.dispatchException(n.arg);
                } else "return" === n.method && n.abrupt("return", n.arg);
                i = d;
                var s = v(e, t, n);
                if ("normal" === s.type) {
                  if (((i = n.done ? m : h), s.arg === b)) continue;
                  return { value: s.arg, done: n.done };
                }
                "throw" === s.type &&
                  ((i = m), (n.method = "throw"), (n.arg = s.arg));
              }
            };
          })(e, n, a)),
          r
        );
      }
      function v(e, t, n) {
        try {
          return { type: "normal", arg: e.call(t, n) };
        } catch (e) {
          return { type: "throw", arg: e };
        }
      }
      e.wrap = u;
      var f = "suspendedStart",
        h = "suspendedYield",
        d = "executing",
        m = "completed",
        b = {};
      function g() {}
      function p() {}
      function y() {}
      var S = {};
      l(S, a, function () {
        return this;
      });
      var _ = Object.getPrototypeOf,
        k = _ && _(_(x([])));
      k && k !== i && o.call(k, a) && (S = k);
      var w = (y.prototype = g.prototype = Object.create(S));
      function L(e) {
        ["next", "throw", "return"].forEach(function (t) {
          l(e, t, function (e) {
            return this._invoke(t, e);
          });
        });
      }
      function B(e, t) {
        function i(r, a, c, s) {
          var l = v(e[r], e, a);
          if ("throw" !== l.type) {
            var u = l.arg,
              f = u.value;
            return f && "object" === n(f) && o.call(f, "__await")
              ? t.resolve(f.__await).then(
                  function (e) {
                    i("next", e, c, s);
                  },
                  function (e) {
                    i("throw", e, c, s);
                  }
                )
              : t.resolve(f).then(
                  function (e) {
                    (u.value = e), c(u);
                  },
                  function (e) {
                    return i("throw", e, c, s);
                  }
                );
          }
          s(l.arg);
        }
        var r;
        this._invoke = function (e, n) {
          function o() {
            return new t(function (t, o) {
              i(e, n, t, o);
            });
          }
          return (r = r ? r.then(o, o) : o());
        };
      }
      function O(e, n) {
        var i = e.iterator[n.method];
        if (i === t) {
          if (((n.delegate = null), "throw" === n.method)) {
            if (
              e.iterator.return &&
              ((n.method = "return"),
              (n.arg = t),
              O(e, n),
              "throw" === n.method)
            )
              return b;
            (n.method = "throw"),
              (n.arg = new TypeError(
                "The iterator does not provide a 'throw' method"
              ));
          }
          return b;
        }
        var o = v(i, e.iterator, n.arg);
        if ("throw" === o.type)
          return (n.method = "throw"), (n.arg = o.arg), (n.delegate = null), b;
        var r = o.arg;
        return r
          ? r.done
            ? ((n[e.resultName] = r.value),
              (n.next = e.nextLoc),
              "return" !== n.method && ((n.method = "next"), (n.arg = t)),
              (n.delegate = null),
              b)
            : r
          : ((n.method = "throw"),
            (n.arg = new TypeError("iterator result is not an object")),
            (n.delegate = null),
            b);
      }
      function E(e) {
        var t = { tryLoc: e[0] };
        1 in e && (t.catchLoc = e[1]),
          2 in e && ((t.finallyLoc = e[2]), (t.afterLoc = e[3])),
          this.tryEntries.push(t);
      }
      function A(e) {
        var t = e.completion || {};
        (t.type = "normal"), delete t.arg, (e.completion = t);
      }
      function q(e) {
        (this.tryEntries = [{ tryLoc: "root" }]),
          e.forEach(E, this),
          this.reset(!0);
      }
      function x(e) {
        if (e) {
          var n = e[a];
          if (n) return n.call(e);
          if ("function" == typeof e.next) return e;
          if (!isNaN(e.length)) {
            var i = -1,
              r = function n() {
                for (; ++i < e.length; )
                  if (o.call(e, i)) return (n.value = e[i]), (n.done = !1), n;
                return (n.value = t), (n.done = !0), n;
              };
            return (r.next = r);
          }
        }
        return { next: H };
      }
      function H() {
        return { value: t, done: !0 };
      }
      return (
        (p.prototype = y),
        l(w, "constructor", y),
        l(y, "constructor", p),
        (p.displayName = l(y, s, "GeneratorFunction")),
        (e.isGeneratorFunction = function (e) {
          var t = "function" == typeof e && e.constructor;
          return (
            !!t &&
            (t === p || "GeneratorFunction" === (t.displayName || t.name))
          );
        }),
        (e.mark = function (e) {
          return (
            Object.setPrototypeOf
              ? Object.setPrototypeOf(e, y)
              : ((e.__proto__ = y), l(e, s, "GeneratorFunction")),
            (e.prototype = Object.create(w)),
            e
          );
        }),
        (e.awrap = function (e) {
          return { __await: e };
        }),
        L(B.prototype),
        l(B.prototype, c, function () {
          return this;
        }),
        (e.AsyncIterator = B),
        (e.async = function (t, n, i, o, r) {
          void 0 === r && (r = Promise);
          var a = new B(u(t, n, i, o), r);
          return e.isGeneratorFunction(n)
            ? a
            : a.next().then(function (e) {
                return e.done ? e.value : a.next();
              });
        }),
        L(w),
        l(w, s, "Generator"),
        l(w, a, function () {
          return this;
        }),
        l(w, "toString", function () {
          return "[object Generator]";
        }),
        (e.keys = function (e) {
          var t = [];
          for (var n in e) t.push(n);
          return (
            t.reverse(),
            function n() {
              for (; t.length; ) {
                var i = t.pop();
                if (i in e) return (n.value = i), (n.done = !1), n;
              }
              return (n.done = !0), n;
            }
          );
        }),
        (e.values = x),
        (q.prototype = {
          constructor: q,
          reset: function (e) {
            if (
              ((this.prev = 0),
              (this.next = 0),
              (this.sent = this._sent = t),
              (this.done = !1),
              (this.delegate = null),
              (this.method = "next"),
              (this.arg = t),
              this.tryEntries.forEach(A),
              !e)
            )
              for (var n in this)
                "t" === n.charAt(0) &&
                  o.call(this, n) &&
                  !isNaN(+n.slice(1)) &&
                  (this[n] = t);
          },
          stop: function () {
            this.done = !0;
            var e = this.tryEntries[0].completion;
            if ("throw" === e.type) throw e.arg;
            return this.rval;
          },
          dispatchException: function (e) {
            if (this.done) throw e;
            var n = this;
            function i(i, o) {
              return (
                (c.type = "throw"),
                (c.arg = e),
                (n.next = i),
                o && ((n.method = "next"), (n.arg = t)),
                !!o
              );
            }
            for (var r = this.tryEntries.length - 1; r >= 0; --r) {
              var a = this.tryEntries[r],
                c = a.completion;
              if ("root" === a.tryLoc) return i("end");
              if (a.tryLoc <= this.prev) {
                var s = o.call(a, "catchLoc"),
                  l = o.call(a, "finallyLoc");
                if (s && l) {
                  if (this.prev < a.catchLoc) return i(a.catchLoc, !0);
                  if (this.prev < a.finallyLoc) return i(a.finallyLoc);
                } else if (s) {
                  if (this.prev < a.catchLoc) return i(a.catchLoc, !0);
                } else {
                  if (!l)
                    throw new Error("try statement without catch or finally");
                  if (this.prev < a.finallyLoc) return i(a.finallyLoc);
                }
              }
            }
          },
          abrupt: function (e, t) {
            for (var n = this.tryEntries.length - 1; n >= 0; --n) {
              var i = this.tryEntries[n];
              if (
                i.tryLoc <= this.prev &&
                o.call(i, "finallyLoc") &&
                this.prev < i.finallyLoc
              ) {
                var r = i;
                break;
              }
            }
            r &&
              ("break" === e || "continue" === e) &&
              r.tryLoc <= t &&
              t <= r.finallyLoc &&
              (r = null);
            var a = r ? r.completion : {};
            return (
              (a.type = e),
              (a.arg = t),
              r
                ? ((this.method = "next"), (this.next = r.finallyLoc), b)
                : this.complete(a)
            );
          },
          complete: function (e, t) {
            if ("throw" === e.type) throw e.arg;
            return (
              "break" === e.type || "continue" === e.type
                ? (this.next = e.arg)
                : "return" === e.type
                ? ((this.rval = this.arg = e.arg),
                  (this.method = "return"),
                  (this.next = "end"))
                : "normal" === e.type && t && (this.next = t),
              b
            );
          },
          finish: function (e) {
            for (var t = this.tryEntries.length - 1; t >= 0; --t) {
              var n = this.tryEntries[t];
              if (n.finallyLoc === e)
                return this.complete(n.completion, n.afterLoc), A(n), b;
            }
          },
          catch: function (e) {
            for (var t = this.tryEntries.length - 1; t >= 0; --t) {
              var n = this.tryEntries[t];
              if (n.tryLoc === e) {
                var i = n.completion;
                if ("throw" === i.type) {
                  var o = i.arg;
                  A(n);
                }
                return o;
              }
            }
            throw new Error("illegal catch attempt");
          },
          delegateYield: function (e, n, i) {
            return (
              (this.delegate = { iterator: x(e), resultName: n, nextLoc: i }),
              "next" === this.method && (this.arg = t),
              b
            );
          },
        }),
        e
      );
    })({});
    try {
      regeneratorRuntime = t;
    } catch (e) {
      "object" ===
      ("undefined" == typeof globalThis ? "undefined" : n(globalThis))
        ? (globalThis.regeneratorRuntime = t)
        : Function("r", "regeneratorRuntime = r")(t);
    }
  })(),
    [Element.prototype, Document.prototype, DocumentFragment.prototype].forEach(
      function (e) {
        e.hasOwnProperty("prepend") ||
          Object.defineProperty(e, "prepend", {
            configurable: !0,
            enumerable: !0,
            writable: !0,
            value: function () {
              var e = Array.prototype.slice.call(arguments),
                t = document.createDocumentFragment();
              e.forEach(function (e) {
                var n = e instanceof Node;
                t.appendChild(n ? e : document.createTextNode(String(e)));
              }),
                this.insertBefore(t, this.firstChild);
            },
          });
      }
    ),
    window.NodeList &&
      !NodeList.prototype.forEach &&
      (NodeList.prototype.forEach = Array.prototype.forEach),
    window.HTMLCollection &&
      !HTMLCollection.prototype.forEach &&
      (HTMLCollection.prototype.forEach = Array.prototype.forEach);
  var s = function (e) {
      switch (e) {
        case "on":
        case "true":
        case "1":
          return !0;
        default:
          return !1;
      }
    },
    l = function (e, t, n) {
      for (
        "string" == typeof t && (t = document.createElement(t)),
          e.appendChild(t).className = n;
        e.firstChild !== t;

      )
        t.appendChild(e.firstChild);
    },
    u = function (e) {
      var t = document.createDocumentFragment();
      if (e) {
        for (; e.firstChild; ) {
          var n = e.removeChild(e.firstChild);
          t.appendChild(n);
        }
        e.parentNode.replaceChild(t, e);
      }
    },
    v = function (e, t) {
      Object.keys(e).forEach(function (e) {
        "function" == typeof t && t(e);
      });
    },
    f = function (e, t) {
      Array.from(e).forEach(function (e) {
        "function" == typeof t && t(e);
      });
    },
    h = function () {
      var e =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
        t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",
        n = new Date(),
        i = n.getTime();
      (i += 864e5),
        n.setTime(i),
        (document.cookie = "bvi_"
          .concat(e, "=")
          .concat(t, ";path=/;expires=")
          .concat(n.toUTCString(), ";domain=")
          .concat(location.host));
    },
    d = function () {
      var e =
        arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
      e = "bvi_".concat(e, "=");
      for (
        var t = decodeURIComponent(document.cookie), n = t.split(";"), i = 0;
        i < n.length;
        i++
      ) {
        var o = n[i].trim();
        if (-1 !== o.indexOf(e)) return o.substring(e.length, o.length);
      }
    },
    m = function () {
      var e =
        arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
      document.cookie = "bvi_"
        .concat(e, "=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=")
        .concat(location.host);
    },
    b = {
      "ru-RU": {
        text: {
          fontSize: "Размер шрифта",
          siteColors: "Цвета сайта",
          images: "Изображения",
          speech: "Синтез речи",
          settings: "Настройки",
          regularVersionOfTheSite: "Обычная версия сайта",
          letterSpacing: "Межбуквенное расстояние",
          normal: "Стандартный",
          average: "Средний",
          big: "Большой",
          lineHeight: "Межстрочный интервал",
          font: "Шрифт",
          arial: "Без засечек",
          times: "С засечками",
          builtElements: "Встроенные элементы (Видео, карты и тд.)",
          on: "Включить",
          off: "Выключить",
          reset: "Сбросить настройки",
          plural_0: "пиксель",
          plural_1: "пекселя",
          plural_2: "пикселей",
        },
        voice: {
          fontSizePlus: "Размер шрифта увели́чен",
          fontSizeMinus: "Размер шрифта уме́ньшен",
          siteColorBlackOnWhite: "Цвет сайта черным по белому",
          siteColorWhiteOnBlack: "Цвет сайта белым по черному",
          siteColorDarkBlueOnBlue: "Цвет сайта тёмно-синим по голубому",
          siteColorBeigeBrown: "Цвет сайта кори́чневым по бе́жевому",
          siteColorGreenOnDarkBrown: "Цвет сайта зеленым по тёмно-коричневому",
          imagesOn: "Изображения включены",
          imagesOFF: "Изображения выключены",
          imagesGrayscale: "Изображения чёрно-белые",
          speechOn: "Синтез речи включён",
          speechOff: "Синтез речи вы́ключен",
          lineHeightNormal: "Межстрочный интервал стандартный",
          lineHeightAverage: "Межстрочный интервал средний",
          lineHeightBig: "Межстрочный интервал большой",
          LetterSpacingNormal: "Интервал между буквами стандартный",
          LetterSpacingAverage: "Интервал между буквами средний",
          LetterSpacingBig: "Интервал между буквами большой",
          fontArial: "Шрифт без засечек",
          fontTimes: "Шрифт с засечками",
          builtElementsOn: "Встроенные элементы включены",
          builtElementsOFF: "Встроенные элементы выключены",
          resetSettings: "Установлены настройки по умолча́нию",
          panelShow: "Панель открыта",
          panelHide: "Панель скрыта",
          panelOn: "Версия сайта для слабови́дящий",
          panelOff: "Обычная версия сайта",
        },
      },
      "en-US": {
        text: {
          fontSize: "Font size",
          siteColors: "Site colors",
          images: "Images",
          speech: "Speech synthesis",
          settings: "Settings",
          regularVersionOfTheSite: "Regular version Of The site",
          letterSpacing: "Letter-to-letter distance",
          normal: "Standard",
          average: "Average",
          big: "Big",
          lineHeight: "Line spacing",
          font: "Font",
          arial: "Arial",
          times: "Times",
          builtElements: "Built-in elements (Videos, maps, etc.)",
          on: "On",
          off: "Off",
          reset: "Reset settings",
          plural_0: "pixel",
          plural_1: "pixels",
          plural_2: "pixels",
        },
        voice: {
          fontSizePlus: "Font size increased",
          fontSizeMinus: "Minus font size",
          siteColorBlackOnWhite: "Site color black on white",
          siteColorWhiteOnBlack: "Site color white on black",
          siteColorDarkBlueOnBlue: "Site color dark blue on cyan",
          siteColorBeigeBrown: "SiteColorBeigeBrown",
          siteColorGreenOnDarkBrown: "Site color green on dark brown",
          imagesOn: "Images on",
          imagesOFF: "Images off",
          imagesGrayscale: "Images grayscale",
          speechOn: "Synthesis speech on",
          speechOff: "Synthesis speech off",
          lineHeightNormal: "Line spacing normal",
          lineHeightAverage: "Line spacing is average",
          lineHeightBig: "Line spacing is big",
          LetterSpacingNormal: "Normal letter spacing",
          LetterSpacingAverage: "Letter spacing is average",
          LetterSpacingBig: "Big letter spacing",
          fontArial: "Font arial",
          fontTimes: "Font times",
          builtElementsOn: "Built-in elements are enabled",
          builtElementsOFF: "Built-in elements are disabled",
          resetSettings: "Default settings have been set",
          panelShow: "Panel show",
          panelHide: "Panel hide",
          panelOn: "Site version for visually impaired",
          panelOff: "Regular version of the site",
        },
      },
    },
    g = (function () {
      function e(t) {
        i(this, e), (this._config = t);
      }
      return (
        r(e, [
          {
            key: "t",
            value: function (e) {
              return b[this._config.lang].text[e];
            },
          },
          {
            key: "v",
            value: function (e) {
              return b[this._config.lang].voice[e];
            },
          },
        ]),
        e
      );
    })(),
    p = {
      target: ".bvi-open",
      fontSize: 16,
      theme: "white",
      images: "grayscale",
      letterSpacing: "normal",
      lineHeight: "normal",
      speech: !0,
      fontFamily: "arial",
      builtElements: !1,
      panelFixed: !0,
      panelHide: !1,
      reload: !1,
      lang: "ru-RU",
    },
    y = {
      target: "string",
      fontSize: "number",
      theme: "string",
      images: "(string|boolean)",
      letterSpacing: "string",
      lineHeight: "string",
      speech: "boolean",
      fontFamily: "string",
      builtElements: "boolean",
      panelFixed: "boolean",
      panelHide: "boolean",
      reload: "boolean",
      lang: "string",
    },
    S = {
      target: "",
      fontSize: "(^[1-9]$|^[1-3][0-9]?$|^39$)",
      theme: "(white|black|blue|brown|green)",
      images: "(true|false|grayscale)",
      letterSpacing: "(normal|average|big)",
      lineHeight: "(normal|average|big)",
      speech: "(true|false)",
      fontFamily: "(arial|times)",
      builtElements: "(true|false)",
      panelFixed: "(true|false)",
      panelHide: "(true|false)",
      reload: "(true|false)",
      lang: "(ru-RU|en-US)",
    };
  return {
    Bvi: (function () {
      function e(t) {
        i(this, e),
          (this._config = this._getConfig(t)),
          (this._elements = document.querySelectorAll(this._config.target)),
          (this._i18n = new g({ lang: this._config.lang })),
          this._addEventListeners(),
          this._init(),
          console.log("Bvi console: ready Button visually impaired v1.0.0");
      }
      return (
        r(e, [
          {
            key: "_init",
            value: function () {
              if (
                (v(this._config, function (e) {
                  void 0 === d(e) && m("panelActive");
                }),
                s(d("panelActive")))
              ) {
                if (
                  (this._set(),
                  this._getPanel(),
                  this._addEventListenersPanel(),
                  this._images(),
                  this._speechPlayer(),
                  "speechSynthesis" in window && s(d("speech")))
                ) {
                  var e = window.speechSynthesis;
                  setInterval(function () {
                    if (!1 === e.pending) {
                      var t = document.querySelectorAll(".bvi-speech-play"),
                        n = document.querySelectorAll(".bvi-speech-pause"),
                        i = document.querySelectorAll(".bvi-speech-resume"),
                        o = document.querySelectorAll(".bvi-speech-stop"),
                        r = function (e, t) {
                          e.forEach(function (e) {
                            return t(e);
                          });
                        };
                      r(t, function (e) {
                        return e.classList.remove("disabled");
                      }),
                        r(n, function (e) {
                          return e.classList.add("disabled");
                        }),
                        r(i, function (e) {
                          return e.classList.add("disabled");
                        }),
                        r(o, function (e) {
                          return e.classList.add("disabled");
                        });
                    }
                  }, 1e3);
                }
              } else this._remove();
            },
          },
          {
            key: "_addEventListeners",
            value: function () {
              var e = this;
              if (!this._elements) return !1;
              this._elements.forEach(function (t) {
                t.addEventListener("click", function (t) {
                  t.preventDefault(),
                    v(e._config, function (t) {
                      return h(t, e._config[t]);
                    }),
                    h("panelActive", !0),
                    e._speech("".concat(e._i18n.v("panelOn"))),
                    e._init();
                });
              });
            },
          },
          {
            key: "_addEventListenersPanel",
            value: function () {
              var e = this,
                t = {
                  fontSizeMinus: document.querySelector(".bvi-fontSize-minus"),
                  fontSizePlus: document.querySelector(".bvi-fontSize-plus"),
                  themeWhite: document.querySelector(".bvi-theme-white"),
                  themeBlack: document.querySelector(".bvi-theme-black"),
                  themeBlue: document.querySelector(".bvi-theme-blue"),
                  themeBrown: document.querySelector(".bvi-theme-brown"),
                  themeGreen: document.querySelector(".bvi-theme-green"),
                  imagesOn: document.querySelector(".bvi-images-on"),
                  imagesOff: document.querySelector(".bvi-images-off"),
                  imagesGrayscale: document.querySelector(
                    ".bvi-images-grayscale"
                  ),
                  speechOn: document.querySelector(".bvi-speech-on"),
                  speechOff: document.querySelector(".bvi-speech-off"),
                  lineHeightNormal: document.querySelector(
                    ".bvi-line-height-normal"
                  ),
                  lineHeightAverage: document.querySelector(
                    ".bvi-line-height-average"
                  ),
                  lineHeightBig: document.querySelector(".bvi-line-height-big"),
                  letterSpacingNormal: document.querySelector(
                    ".bvi-letter-spacing-normal"
                  ),
                  letterSpacingAverage: document.querySelector(
                    ".bvi-letter-spacing-average"
                  ),
                  letterSpacingBig: document.querySelector(
                    ".bvi-letter-spacing-big"
                  ),
                  fontFamilyArial: document.querySelector(
                    ".bvi-font-family-arial"
                  ),
                  fontFamilyTimes: document.querySelector(
                    ".bvi-font-family-times"
                  ),
                  builtElementsOn: document.querySelector(
                    ".bvi-built-elements-on"
                  ),
                  builtElementsOff: document.querySelector(
                    ".bvi-built-elements-off"
                  ),
                  reset: document.querySelector(".bvi-reset"),
                  links: document.querySelectorAll(".bvi-link"),
                  modal: document.querySelector(".bvi-modal"),
                },
                n = function (e) {
                  var t,
                    n = (function (e, t) {
                      var n =
                        ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                      if (!n) {
                        if (
                          Array.isArray(e) ||
                          (n = (function (e, t) {
                            if (e) {
                              if ("string" == typeof e) return c(e, t);
                              var n = Object.prototype.toString
                                .call(e)
                                .slice(8, -1);
                              return (
                                "Object" === n &&
                                  e.constructor &&
                                  (n = e.constructor.name),
                                "Map" === n || "Set" === n
                                  ? Array.from(e)
                                  : "Arguments" === n ||
                                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                      n
                                    )
                                  ? c(e, t)
                                  : void 0
                              );
                            }
                          })(e)) ||
                          (t && e && "number" == typeof e.length)
                        ) {
                          n && (e = n);
                          var i = 0,
                            o = function () {};
                          return {
                            s: o,
                            n: function () {
                              return i >= e.length
                                ? { done: !0 }
                                : { done: !1, value: e[i++] };
                            },
                            e: function (e) {
                              throw e;
                            },
                            f: o,
                          };
                        }
                        throw new TypeError(
                          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      }
                      var r,
                        a = !0,
                        s = !1;
                      return {
                        s: function () {
                          n = n.call(e);
                        },
                        n: function () {
                          var e = n.next();
                          return (a = e.done), e;
                        },
                        e: function (e) {
                          (s = !0), (r = e);
                        },
                        f: function () {
                          try {
                            a || null == n.return || n.return();
                          } finally {
                            if (s) throw r;
                          }
                        },
                      };
                    })(e.parentNode.children);
                  try {
                    for (n.s(); !(t = n.n()).done; )
                      t.value.classList.remove("active");
                  } catch (e) {
                    n.e(e);
                  } finally {
                    n.f();
                  }
                  e.classList.add("active");
                },
                i = function (e, t) {
                  e.addEventListener("click", function (e) {
                    e.preventDefault(), "function" == typeof t && t(e);
                  });
                },
                o = function () {
                  document.querySelectorAll(".bvi-link").forEach(function (e) {
                    e.classList.remove("active");
                  }),
                    v(e._config, function (e) {
                      if ("theme" === e) {
                        var t = d(e);
                        document
                          .querySelector(".bvi-theme-".concat(t))
                          .classList.add("active");
                      }
                      if ("images" === e) {
                        var n =
                          "grayscale" === d(e)
                            ? "grayscale"
                            : s(d(e))
                            ? "on"
                            : "off";
                        document
                          .querySelector(".bvi-images-".concat(n))
                          .classList.add("active");
                      }
                      if ("speech" === e) {
                        var i = s(d(e)) ? "on" : "off";
                        document
                          .querySelector(".bvi-speech-".concat(i))
                          .classList.add("active");
                      }
                      if ("lineHeight" === e) {
                        var o = d(e);
                        document
                          .querySelector(".bvi-line-height-".concat(o))
                          .classList.add("active");
                      }
                      if ("letterSpacing" === e) {
                        var r = d(e);
                        document
                          .querySelector(".bvi-letter-spacing-".concat(r))
                          .classList.add("active");
                      }
                      if ("fontFamily" === e) {
                        var a = d(e);
                        document
                          .querySelector(".bvi-font-family-".concat(a))
                          .classList.add("active");
                      }
                      if ("builtElements" === e) {
                        var c = s(d(e)) ? "on" : "off";
                        document
                          .querySelector(".bvi-built-elements-".concat(c))
                          .classList.add("active");
                      }
                    });
                };
              o(),
                i(t.fontSizeMinus, function () {
                  var i = parseFloat(d("fontSize")) - 1;
                  0 !== i &&
                    (e._setAttrDataBviBody("fontSize", i),
                    h("fontSize", i),
                    e._speech("".concat(e._i18n.v("fontSizeMinus"))),
                    n(t.fontSizeMinus));
                }),
                i(t.fontSizePlus, function () {
                  var i = parseFloat(d("fontSize")) + 1;
                  40 !== i &&
                    (e._setAttrDataBviBody("fontSize", i),
                    h("fontSize", i),
                    e._speech("".concat(e._i18n.v("fontSizePlus"))),
                    n(t.fontSizePlus));
                }),
                i(t.themeWhite, function () {
                  e._setAttrDataBviBody("theme", "white"),
                    h("theme", "white"),
                    e._speech("".concat(e._i18n.v("siteColorBlackOnWhite"))),
                    n(t.themeWhite);
                }),
                i(t.themeBlack, function () {
                  e._setAttrDataBviBody("theme", "black"),
                    h("theme", "black"),
                    e._speech("".concat(e._i18n.v("siteColorWhiteOnBlack"))),
                    n(t.themeBlack);
                }),
                i(t.themeBlue, function () {
                  e._setAttrDataBviBody("theme", "blue"),
                    h("theme", "blue"),
                    e._speech("".concat(e._i18n.v("siteColorDarkBlueOnBlue"))),
                    n(t.themeBlue);
                }),
                i(t.themeBrown, function () {
                  e._setAttrDataBviBody("theme", "brown"),
                    h("theme", "brown"),
                    e._speech("".concat(e._i18n.v("siteColorBeigeBrown"))),
                    n(t.themeBrown);
                }),
                i(t.themeGreen, function () {
                  e._setAttrDataBviBody("theme", "green"),
                    h("theme", "green"),
                    e._speech(
                      "".concat(e._i18n.v("siteColorGreenOnDarkBrown"))
                    ),
                    n(t.themeGreen);
                }),
                i(t.imagesOn, function () {
                  e._setAttrDataBviBody("images", "true"),
                    h("images", "true"),
                    e._speech("".concat(e._i18n.v("imagesOn"))),
                    n(t.imagesOn);
                }),
                i(t.imagesOff, function () {
                  e._setAttrDataBviBody("images", "false"),
                    h("images", "false"),
                    e._speech("".concat(e._i18n.v("imagesOFF"))),
                    n(t.imagesOff);
                }),
                i(t.imagesGrayscale, function () {
                  e._setAttrDataBviBody("images", "grayscale"),
                    h("images", "grayscale"),
                    e._speech("".concat(e._i18n.v("imagesGrayscale"))),
                    n(t.imagesGrayscale);
                }),
                i(t.speechOn, function () {
                  e._setAttrDataBviBody("speech", "true"),
                    h("speech", "true"),
                    e._speech("".concat(e._i18n.v("speechOn"))),
                    n(t.speechOn),
                    e._speechPlayer();
                }),
                i(t.speechOff, function () {
                  e._speech("".concat(e._i18n.v("speechOff"))),
                    e._setAttrDataBviBody("speech", "false"),
                    h("speech", "false"),
                    n(t.speechOff),
                    e._speechPlayer();
                }),
                i(t.lineHeightNormal, function () {
                  e._setAttrDataBviBody("lineHeight", "normal"),
                    h("lineHeight", "normal"),
                    e._speech("".concat(e._i18n.v("lineHeightNormal"))),
                    n(t.lineHeightNormal);
                }),
                i(t.lineHeightAverage, function () {
                  e._setAttrDataBviBody("lineHeight", "average"),
                    h("lineHeight", "average"),
                    e._speech("".concat(e._i18n.v("lineHeightAverage"))),
                    n(t.lineHeightAverage);
                }),
                i(t.lineHeightBig, function () {
                  e._setAttrDataBviBody("lineHeight", "big"),
                    h("lineHeight", "big"),
                    e._speech("".concat(e._i18n.v("lineHeightBig"))),
                    n(t.lineHeightBig);
                }),
                i(t.letterSpacingNormal, function () {
                  e._setAttrDataBviBody("letterSpacing", "normal"),
                    h("letterSpacing", "normal"),
                    e._speech("".concat(e._i18n.v("LetterSpacingNormal"))),
                    n(t.letterSpacingNormal);
                }),
                i(t.letterSpacingAverage, function () {
                  e._setAttrDataBviBody("letterSpacing", "average"),
                    h("letterSpacing", "average"),
                    e._speech("".concat(e._i18n.v("LetterSpacingAverage"))),
                    n(t.letterSpacingAverage);
                }),
                i(t.letterSpacingBig, function () {
                  e._setAttrDataBviBody("letterSpacing", "big"),
                    h("letterSpacing", "big"),
                    e._speech("".concat(e._i18n.v("LetterSpacingBig"))),
                    n(t.letterSpacingBig);
                }),
                i(t.fontFamilyArial, function () {
                  e._setAttrDataBviBody("fontFamily", "arial"),
                    h("fontFamily", "arial"),
                    e._speech("".concat(e._i18n.v("fontArial"))),
                    n(t.fontFamilyArial);
                }),
                i(t.fontFamilyTimes, function () {
                  e._setAttrDataBviBody("fontFamily", "times"),
                    h("fontFamily", "times"),
                    e._speech("".concat(e._i18n.v("fontTimes"))),
                    n(t.fontFamilyTimes);
                }),
                i(t.builtElementsOn, function () {
                  e._setAttrDataBviBody("builtElements", "true"),
                    h("builtElements", "true"),
                    e._speech("".concat(e._i18n.v("builtElementsOn"))),
                    n(t.builtElementsOn);
                }),
                i(t.builtElementsOff, function () {
                  e._setAttrDataBviBody("builtElements", "false"),
                    h("builtElements", "false"),
                    e._speech("".concat(e._i18n.v("builtElementsOFF"))),
                    n(t.builtElementsOff);
                }),
                i(t.reset, function () {
                  e._speech("".concat(e._i18n.v("resetSettings"))),
                    v(e._config, function (t) {
                      e._setAttrDataBviBody(t, e._config[t]),
                        h(t, e._config[t]),
                        o();
                    });
                }),
                f(t.links, function (n) {
                  i(n, function (n) {
                    var i = n.target.getAttribute("data-bvi");
                    "close" === i &&
                      (e._setAttrDataBviBody("panelActive", "false"),
                      h("panelActive", "false"),
                      e._init()),
                      "modal" === i &&
                        ((document.body.style.overflow = "hidden"),
                        document.body.classList.add("bvi-noscroll"),
                        t.modal.classList.toggle("show")),
                      "modal-close" === i &&
                        (document.body.classList.remove("bvi-noscroll"),
                        (document.body.style.overflow = ""),
                        t.modal.classList.remove("show")),
                      "panel-hide" === i &&
                        (document
                          .querySelector(".bvi-panel")
                          .classList.add("bvi-panel-hide"),
                        document
                          .querySelector(".bvi-link-fixed-top")
                          .classList.remove("bvi-hide"),
                        document
                          .querySelector(".bvi-link-fixed-top")
                          .classList.add("bvi-show"),
                        h("panelHide", "true"),
                        e._speech("".concat(e._i18n.v("panelHide")))),
                      "panel-show" === i &&
                        (document
                          .querySelector(".bvi-link-fixed-top")
                          .classList.remove("bvi-show"),
                        document
                          .querySelector(".bvi-link-fixed-top")
                          .classList.add("bvi-hide"),
                        document
                          .querySelector(".bvi-panel")
                          .classList.remove("bvi-panel-hide"),
                        h("panelHide", "false"),
                        e._speech("".concat(e._i18n.v("panelShow"))));
                  });
                }),
                i(t.modal, function (e) {
                  e.target.contains(t.modal) &&
                    (document.body.classList.remove("bvi-noscroll"),
                    (document.body.style.overflow = ""),
                    t.modal.classList.remove("show"));
                });
            },
          },
          {
            key: "_getPanel",
            value: function () {
              var e = function () {
                  var e =
                    void 0 !== window.pageYOffset
                      ? window.pageYOffset
                      : (
                          document.documentElement ||
                          document.body.parentNode ||
                          document.body
                        ).scrollTop;
                  s(d("panelFixed")) &&
                    (e > 200
                      ? document
                          .querySelector(".bvi-panel")
                          .classList.add("bvi-fixed-top")
                      : document
                          .querySelector(".bvi-panel")
                          .classList.remove("bvi-fixed-top"));
                },
                t = s(d("panelHide")) ? " bvi-panel-hide" : "",
                n = s(d("panelHide")) ? "bvi-show" : " bvi-hide",
                i = "\n    <div class='bvi-panel"
                  .concat(
                    t,
                    '\'>\n        <div class="bvi-blocks bvi-block-center">\n            <div class="bvi-block">\n                <div class="bvi-block-title">'
                  )
                  .concat(
                    this._i18n.t("fontSize"),
                    '</div>\n                <a class="bvi-link bvi-fontSize-minus">А-</a>\n                <a class="bvi-link bvi-fontSize-plus">А+</a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">'
                  )
                  .concat(
                    this._i18n.t("siteColors"),
                    '</div>\n                <a href="#" class="bvi-link bvi-theme-white">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-black">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-blue">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-brown">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-green">Ц</a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">'
                  )
                  .concat(
                    this._i18n.t("images"),
                    '</div>\n                <a href="#" class="bvi-link bvi-images-on">\n                    <i class="bvi-images bvi-images-image"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-images-off">\n                    <i class="bvi-images bvi-images-minus-circle"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-images-grayscale">\n                    <i class="bvi-images bvi-images-adjust"></i>\n                </a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">'
                  )
                  .concat(
                    this._i18n.t("speech"),
                    '</div>\n                <a href="#" class="bvi-link bvi-speech-off">\n                    <i class="bvi-images bvi-images-volume-off"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-speech-on">\n                    <i class="bvi-images bvi-images-volume-up"></i>\n                </a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">'
                  )
                  .concat(
                    this._i18n.t("settings"),
                    '</div>\n                <a href="#" class="bvi-link" data-bvi="modal">\n                    <i class="bvi-images bvi-images-cog"></i>\n                </a>\n                <a href="#" class="bvi-link" data-bvi="close">\n                    '
                  )
                  .concat(
                    this._i18n.t("regularVersionOfTheSite"),
                    '\n                </a>\n                <a href="#" class="bvi-link" data-bvi="panel-hide">\n                    <i class="bvi-images bvi-images-minus"></i>\n                </a>\n            </div>\n        </div>\n        <div class="bvi-modal">\n            <div class="bvi-modal-dialog">\n                <div class="bvi-modal-content">\n                    <div class="bvi-modal-header">\n                        <div class="bvi-modal-title">'
                  )
                  .concat(
                    this._i18n.t("settings"),
                    '</div>\n                        <a href="#" class="bvi-link bvi-modal-close" data-bvi="modal-close">×</a>\n                    </div>\n                    <div class="bvi-modal-body">\n                        <div class="bvi-blocks bvi-block-center">\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">'
                  )
                  .concat(
                    this._i18n.t("letterSpacing"),
                    '</div>\n                                <a href="#" class="bvi-link bvi-letter-spacing-normal">'
                  )
                  .concat(
                    this._i18n.t("normal"),
                    '</a>\n                                <a href="#" class="bvi-link bvi-letter-spacing-average">'
                  )
                  .concat(
                    this._i18n.t("average"),
                    '</a>\n                                <a href="#" class="bvi-link bvi-letter-spacing-big">'
                  )
                  .concat(
                    this._i18n.t("big"),
                    '</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">'
                  )
                  .concat(
                    this._i18n.t("lineHeight"),
                    '</div>\n                                <a href="#" class="bvi-link bvi-line-height-normal">'
                  )
                  .concat(
                    this._i18n.t("normal"),
                    '</a>\n                                <a href="#" class="bvi-link bvi-line-height-average">'
                  )
                  .concat(
                    this._i18n.t("average"),
                    '</a>\n                                <a href="#" class="bvi-link bvi-line-height-big">'
                  )
                  .concat(
                    this._i18n.t("big"),
                    '</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">'
                  )
                  .concat(
                    this._i18n.t("font"),
                    '</div>\n                                <a href="#" class="bvi-link bvi-font-family-arial">'
                  )
                  .concat(
                    this._i18n.t("arial"),
                    '</a>\n                                <a href="#" class="bvi-link bvi-font-family-times">'
                  )
                  .concat(
                    this._i18n.t("times"),
                    '</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">'
                  )
                  .concat(
                    this._i18n.t("builtElements"),
                    '</div>\n                                <a href="#" class="bvi-link bvi-built-elements-on">'
                  )
                  .concat(
                    this._i18n.t("on"),
                    '</a>\n                                <a href="#" class="bvi-link bvi-built-elements-off">'
                  )
                  .concat(
                    this._i18n.t("off"),
                    '</a>\n                            </div>\n                        </div>\n                        <div class="bvi-blocks bvi-block-center">\n                            <a href="https://bvi.isvek.ru" class="bvi-copyright" target="_blank">bvi.isvek.ru</a>\n                        </div>\n                    </div>\n                    <div class="bvi-modal-footer">\n                        <a href="#" class="bvi-link bvi-reset">'
                  )
                  .concat(
                    this._i18n.t("reset"),
                    "</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>"
                  ),
                o =
                  '<a href="#" class="bvi-link bvi-link-fixed-top bvi-no-styles '.concat(
                    n,
                    '" data-bvi="panel-show">'
                  ) +
                  '<i class="bvi-images bvi-images-eye bvi-images-size-32 bvi-no-styles"></i></a>';
              window.addEventListener("scroll", e),
                document
                  .querySelector(".bvi-body")
                  .insertAdjacentHTML("beforebegin", i),
                document
                  .querySelector(".bvi-body")
                  .insertAdjacentHTML("afterbegin", o),
                e();
            },
          },
          {
            key: "_set",
            value: function () {
              var e = this;
              document.body.classList.add("bvi-active"),
                l(document.body, "div", "bvi-body"),
                v(this._config, function (t) {
                  return e._setAttrDataBviBody(t, d(t));
                }),
                f(this._elements, function (e) {
                  return (e.style.display = "none");
                }),
                document.querySelectorAll("img").forEach(function (e) {
                  e.classList.contains("bvi-img") &&
                    e.classList.remove("bvi-img");
                }),
                document.querySelectorAll("body *").forEach(function (e) {
                  e.classList.contains("bvi-background-image") &&
                    e.classList.remove("bvi-background-image");
                });
            },
          },
          {
            key: "_remove",
            value: function () {
              var e = document.querySelector(".bvi-panel"),
                t = document.querySelector(".bvi-body"),
                n = document.querySelector(".bvi-link-fixed-top");
              e && e.remove(),
                t && u(t),
                n && n.remove(),
                this._speech("".concat(this._i18n.v("panelOff"))),
                document.body.classList.remove("bvi-active"),
                f(this._elements, function (e) {
                  return (e.style.display = "");
                }),
                s(d("reload")) && document.location.reload(),
                v(this._config, function (e) {
                  m(e);
                }),
                this._speechPlayer(),
                m("panelActive");
            },
          },
          {
            key: "_images",
            value: function () {
              document.querySelectorAll("img").forEach(function (e) {
                e.classList.contains("bvi-no-style") ||
                  e.classList.add("bvi-img");
              }),
                document.querySelectorAll(".bvi-body *").forEach(function (e) {
                  var t = getComputedStyle(e);
                  "none" === t.backgroundImage ||
                    "none" === t.background ||
                    e.classList.contains("bvi-no-style") ||
                    e.classList.add("bvi-background-image");
                });
            },
          },
          {
            key: "_getConfig",
            value: function (e) {
              e = t(t({}, p), e);
              var i = {};
              for (var o in p) i[o] = e[o];
              return (
                (function (e, t, i) {
                  Object.keys(t).forEach(function (i) {
                    var o,
                      r = t[i],
                      a = e[i],
                      c =
                        a &&
                        (o = a) &&
                        "object" === n(o) &&
                        void 0 !== o.nodeType
                          ? "element"
                          : (function (e) {
                              return null == e
                                ? "".concat(e)
                                : {}.toString
                                    .call(e)
                                    .match(/\s([a-z]+)/i)[1]
                                    .toLowerCase();
                            })(a);
                    if (!new RegExp(r).test(c))
                      throw new TypeError(
                        'Bvi console: Опция "'
                          .concat(i, '" предоставленный тип "')
                          .concat(c, '", ожидаемый тип "')
                          .concat(r, '".')
                      );
                  }),
                    Object.keys(i).forEach(function (t) {
                      var n = i[t],
                        o = e[t];
                      if (!new RegExp(n).test(o))
                        throw new TypeError(
                          'Bvi console: Опция "'
                            .concat(t, '" параметр "')
                            .concat(o, '", ожидаемый параметр "')
                            .concat(n, '".')
                        );
                    });
                })(i, y, S),
                i
              );
            },
          },
          {
            key: "_setAttrDataBviBody",
            value: function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : "",
                t =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : "";
              document
                .querySelector(".bvi-body")
                .setAttribute("data-bvi-".concat(e), t);
            },
          },
          {
            key: "_speechPlayer",
            value: function () {
              var e = this,
                t = document.querySelectorAll(".bvi-speech-text"),
                n = document.querySelectorAll(".bvi-speech-link"),
                i = document.querySelectorAll(".bvi-speech");
              if ("speechSynthesis" in window && s(d("speech"))) {
                var o = window.speechSynthesis;
                if (i) {
                  t &&
                    t.forEach(function (e) {
                      return u(e);
                    }),
                    n &&
                      n.forEach(function (e) {
                        return e.remove();
                      }),
                    i.forEach(function (e, t) {
                      var n = "bvi-speech-text-id-".concat(t + 1);
                      l(e, "div", "bvi-speech-text ".concat(n)),
                        e.insertAdjacentHTML(
                          "afterbegin",
                          '\n            <div class="bvi-speech-link">\n              <a href="#" class="bvi-link bvi-speech-play" title="Воспроизвести">Воспроизвести</a>\n              <a href="#" class="bvi-link bvi-speech-pause disabled" title="Пауза">Пауза</a>\n              <a href="#" class="bvi-link bvi-speech-resume disabled" title="Продолжить">Продолжить</a>\n              <a href="#" class="bvi-link bvi-speech-stop disabled" title="Стоп">Стоп</i></a>\n          </div>'
                        );
                    });
                  var r = document.querySelectorAll(".bvi-speech-play"),
                    a = document.querySelectorAll(".bvi-speech-pause"),
                    c = document.querySelectorAll(".bvi-speech-resume"),
                    v = document.querySelectorAll(".bvi-speech-stop"),
                    f = function (e, t) {
                      e.forEach(function (e) {
                        e.addEventListener(
                          "click",
                          function (n) {
                            if ((n.preventDefault(), "function" == typeof t))
                              return t(e, n);
                          },
                          !1
                        );
                      });
                    };
                  f(r, function (t, n) {
                    var i = n.target,
                      o = i.parentNode.nextElementSibling,
                      r = n.target.closest(".bvi-speech-link"),
                      a = document.querySelectorAll(".bvi-speech-play"),
                      c = document.querySelectorAll(".bvi-speech-pause"),
                      s = document.querySelectorAll(".bvi-speech-resume"),
                      l = document.querySelectorAll(".bvi-speech-stop");
                    e._speech(o.textContent, o, !0),
                      a.forEach(function (e) {
                        return e.classList.remove("disabled");
                      }),
                      c.forEach(function (e) {
                        return e.classList.add("disabled");
                      }),
                      s.forEach(function (e) {
                        return e.classList.add("disabled");
                      }),
                      l.forEach(function (e) {
                        return e.classList.add("disabled");
                      }),
                      i.classList.add("disabled"),
                      r
                        .querySelector(".bvi-speech-pause")
                        .classList.remove("disabled"),
                      r
                        .querySelector(".bvi-speech-stop")
                        .classList.remove("disabled");
                  }),
                    f(a, function (e, t) {
                      var n = t.target,
                        i = t.target.closest(".bvi-speech-link");
                      n.classList.add("disabled"),
                        i
                          .querySelector(".bvi-speech-resume")
                          .classList.remove("disabled"),
                        o.pause();
                    }),
                    f(c, function (e, t) {
                      var n = t.target,
                        i = t.target.closest(".bvi-speech-link");
                      n.classList.add("disabled"),
                        i
                          .querySelector(".bvi-speech-pause")
                          .classList.remove("disabled"),
                        o.resume();
                    }),
                    f(v, function (e, t) {
                      var n = t.target,
                        i = t.target.closest(".bvi-speech-link");
                      n.classList.add("disabled"),
                        i
                          .querySelector(".bvi-speech-pause")
                          .classList.add("disabled"),
                        i
                          .querySelector(".bvi-speech-play")
                          .classList.remove("disabled"),
                        o.cancel();
                    });
                }
              } else
                t &&
                  t.forEach(function (e) {
                    return u(e);
                  }),
                  n &&
                    n.forEach(function (e) {
                      return e.remove();
                    });
            },
          },
          {
            key: "_speech",
            value: function (e, t) {
              var n = this,
                i =
                  arguments.length > 2 &&
                  void 0 !== arguments[2] &&
                  arguments[2];
              if ("speechSynthesis" in window && s(d("speech"))) {
                var o = window.speechSynthesis,
                  r = function (e, t) {
                    (e = String(e)), (t = Number(t) >>> 0);
                    var n = e.slice(0, t + 1).search(/\S+$/),
                      i = e.slice(t).search(/\s/);
                    return i < 0 ? e.slice(n) : e.slice(n, i + t);
                  },
                  a = o.getVoices(),
                  c = 120,
                  l = new RegExp(
                    "^[\\s\\S]{" +
                      Math.floor(c / 2) +
                      "," +
                      c +
                      "}[.!?,]{1}|^[\\s\\S]{1," +
                      c +
                      "}$|^[\\s\\S]{1," +
                      c +
                      "} "
                  ),
                  u = [],
                  v = e;
                for (o.cancel(); v.length > 0; )
                  u.push(v.match(l)[0]),
                    (v = v.substring(u[u.length - 1].length));
                u.forEach(function (e) {
                  var c = new SpeechSynthesisUtterance(e.trim());
                  (c.volume = 1),
                    (c.rate = 1),
                    (c.pitch = 1),
                    (c.lang = "".concat(n._config.lang));
                  for (var s = 0; s < a.length; s++)
                    a[s].lang === n._config.lang &&
                      "Microsoft Pavel - Russian (Russia)" === a[s].name &&
                      (c.voice = a[s]);
                  i &&
                    ((c.onboundary = function (e) {
                      t.classList.add("bvi-highlighting");
                      var n = r(e.utterance.text, e.charIndex),
                        i = t.textContent,
                        o = n.replace(/(\s+)/, "(<[^>]+>)*$1(<[^>]+>)*"),
                        a = new RegExp("(" + o + ")", "gi");
                      (i = (i = i.replace(a, "<mark>$1</mark>")).replace(
                        /(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\/mark>)/,
                        "$1</mark>$2<mark>$4"
                      )),
                        (t.innerHTML = i);
                    }),
                    (c.onend = function (e) {
                      t.classList.remove("bvi-highlighting");
                      var n = t.textContent;
                      (n = n.replace(/(<mark>$1<\/mark>)/, "$1")),
                        (t.innerHTML = n);
                    })),
                    o.speak(c);
                });
              }
            },
          },
        ]),
        e
      );
    })(),
  };
});
